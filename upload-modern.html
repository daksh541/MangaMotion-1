<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload - MangaMotion AI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0F0F23 0%, #1A1A2E 50%, #0F0F23 100%);
            color: #e5e7eb;
            min-height: 100vh;
        }
        .nav { background: rgba(15, 15, 35, 0.95); backdrop-filter: blur(10px); padding: 1rem 2rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); display: flex; justify-content: space-between; align-items: center; }
        .logo { display: flex; align-items: center; gap: 0.75rem; color: white; text-decoration: none; font-weight: 700; font-size: 1.25rem; }
        .logo-icon { width: 40px; height: 40px; background: linear-gradient(135deg, #a855f7, #3b82f6); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; }
        .container { max-width: 1000px; margin: 0 auto; padding: 3rem 2rem; }
        .hero { text-align: center; margin-bottom: 3rem; }
        .hero h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; background: linear-gradient(135deg, #a855f7, #3b82f6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .hero p { color: #9ca3af; font-size: 1.1rem; }
        .upload-box { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 3rem; }
        .upload-zone { border: 3px dashed rgba(168, 85, 247, 0.3); border-radius: 16px; padding: 3rem; text-align: center; cursor: pointer; transition: all 0.3s; background: rgba(168, 85, 247, 0.02); }
        .upload-zone:hover { border-color: rgba(168, 85, 247, 0.6); background: rgba(168, 85, 247, 0.05); }
        .upload-zone.drag { border-color: #a855f7; background: rgba(168, 85, 247, 0.1); }
        .upload-icon { font-size: 3rem; color: #a855f7; margin-bottom: 1rem; }
        .upload-zone h3 { color: white; font-size: 1.5rem; margin-bottom: 0.5rem; }
        .upload-zone p { color: #9ca3af; margin-bottom: 1.5rem; }
        .btn-group { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-weight: 500; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 0.5rem; }
        .btn-primary { background: linear-gradient(135deg, #a855f7, #3b82f6); color: white; }
        .btn-primary:hover { transform: scale(1.05); box-shadow: 0 10px 25px rgba(168, 85, 247, 0.3); }
        .btn-secondary { background: transparent; color: #a855f7; border: 2px solid #a855f7; }
        .btn-secondary:hover { background: rgba(168, 85, 247, 0.1); }
        .file-input { display: none; }
        .file-preview { display: none; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 2rem; margin-top: 2rem; animation: slideIn 0.3s ease; }
        .file-preview.show { display: block; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .preview-header { display: flex; justify-content: space-between; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .preview-header h4 { color: white; }
        .preview-stats { text-align: right; }
        .preview-stats .count { color: #a855f7; font-weight: 600; }
        .preview-stats .size { color: #6b7280; font-size: 0.875rem; }
        .file-list { display: flex; flex-direction: column; gap: 0.75rem; max-height: 300px; overflow-y: auto; margin-bottom: 1rem; }
        .file-item { display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: rgba(51, 65, 85, 0.5); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 8px; transition: all 0.3s; }
        .file-item:hover { background: rgba(51, 65, 85, 0.7); border-color: rgba(168, 85, 247, 0.3); }
        .file-info { display: flex; align-items: center; gap: 1rem; flex: 1; }
        .file-icon { width: 40px; height: 40px; background: rgba(51, 65, 85, 0.5); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #9ca3af; }
        .file-details h5 { color: white; margin-bottom: 0.25rem; word-break: break-word; }
        .file-details p { color: #6b7280; font-size: 0.8rem; }
        .btn-remove { background: none; border: none; color: #9ca3af; cursor: pointer; font-size: 1.2rem; transition: color 0.3s; }
        .btn-remove:hover { color: #ef4444; }
        .btn-clear { width: 100%; padding: 0.75rem; background: transparent; border: 1px solid rgba(255, 255, 255, 0.1); color: #9ca3af; border-radius: 8px; cursor: pointer; transition: all 0.3s; }
        .btn-clear:hover { border-color: #ef4444; color: #ef4444; }
        .progress-box { display: none; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 2rem; margin-top: 2rem; animation: slideIn 0.3s ease; }
        .progress-box.show { display: block; }
        .progress-header { display: flex; justify-content: space-between; margin-bottom: 1rem; }
        .progress-header h4 { color: white; }
        .progress-percent { color: #a855f7; font-weight: 600; }
        .progress-bar { width: 100%; height: 8px; background: rgba(255, 255, 255, 0.1); border-radius: 4px; overflow: hidden; margin-bottom: 1rem; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #a855f7, #3b82f6); width: 0%; transition: width 0.3s ease; }
        .progress-text { color: #9ca3af; font-size: 0.95rem; }
        .tips { margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .tips-header { display: flex; justify-content: space-between; align-items: center; cursor: pointer; padding: 1rem; background: rgba(255, 255, 255, 0.03); border-radius: 8px; user-select: none; }
        .tips-header h4 { color: white; display: flex; align-items: center; gap: 0.5rem; }
        .tips-icon { color: #fbbf24; }
        .tips-chevron { color: #6b7280; transition: transform 0.3s; }
        .tips-header.open .tips-chevron { transform: rotate(180deg); }
        .tips-content { display: none; padding: 1.5rem; color: #9ca3af; }
        .tips-content.show { display: block; animation: slideIn 0.3s ease; }
        .tip-item { display: flex; gap: 1rem; margin-bottom: 1rem; }
        .tip-item:last-child { margin-bottom: 0; }
        .tip-check { color: #10b981; font-size: 1.1rem; flex-shrink: 0; margin-top: 0.2rem; }
        .actions { display: flex; justify-content: space-between; align-items: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(255, 255, 255, 0.1); flex-wrap: wrap; gap: 1rem; }
        .btn-back { background: none; border: none; color: #9ca3af; cursor: pointer; text-decoration: none; display: flex; align-items: center; gap: 0.5rem; transition: color 0.3s; }
        .btn-back:hover { color: white; }
        .btn-submit { padding: 0.75rem 2rem; background: linear-gradient(135deg, #a855f7, #3b82f6); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem; }
        .btn-submit:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(168, 85, 247, 0.3); }
        .btn-submit:disabled { opacity: 0.5; cursor: not-allowed; }
        .file-status { color: #9ca3af; font-size: 0.95rem; }
        .footer { background: rgba(15, 15, 35, 0.95); border-top: 1px solid rgba(255, 255, 255, 0.1); padding: 2rem; text-align: center; color: #9ca3af; margin-top: 4rem; }
        @media (max-width: 768px) {
            .hero h1 { font-size: 1.8rem; }
            .upload-box { padding: 1.5rem; }
            .upload-zone { padding: 2rem 1rem; }
            .actions { flex-direction: column-reverse; }
            .btn-back, .btn-submit { width: 100%; justify-content: center; }
            .file-status { display: none; }
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2); border-radius: 4px; }
    </style>
</head>
<body>
    <nav class="nav">
        <a href="index.html" class="logo">
            <div class="logo-icon"><i class="fas fa-play"></i></div>
            <span>MangaMotion</span>
        </a>
    </nav>

    <div class="container">
        <div class="hero">
            <h1>Upload Your Manga</h1>
            <p>Start creating cinematic animations from your manga pages</p>
        </div>

        <div class="upload-box">
            <div class="upload-zone" id="zone">
                <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                <h3>Drag & Drop Manga Pages Here</h3>
                <p>Or click to browse files (JPG, PNG, WEBP)</p>
                <input type="file" id="fileInput" class="file-input" multiple accept="image/jpeg,image/png,image/webp">
                <div class="btn-group">
                    <button class="btn btn-primary" id="selectBtn"><i class="fas fa-folder-open"></i>Select Files</button>
                    <button class="btn btn-secondary" id="demoBtn"><i class="fas fa-magic"></i>Try Demo</button>
                </div>
            </div>

            <div class="progress-box" id="progress">
                <div class="progress-header">
                    <h4>Uploading Files</h4>
                    <span class="progress-percent" id="percent">0%</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="fill"></div></div>
                <div class="progress-text" id="status">Preparing files...</div>
            </div>

            <div class="file-preview" id="preview">
                <div class="preview-header">
                    <div><h4>Selected Files</h4><p style="color: #6b7280; font-size: 0.85rem;">Ready to upload</p></div>
                    <div class="preview-stats">
                        <div class="count"><span id="count">0</span> files</div>
                        <div class="size"><span id="size">0</span> MB</div>
                    </div>
                </div>
                <div class="file-list" id="list"></div>
                <button class="btn-clear" id="clearBtn"><i class="fas fa-trash"></i>Clear All Files</button>
            </div>

            <div class="tips">
                <div class="tips-header" id="tipsBtn">
                    <h4><i class="fas fa-lightbulb tips-icon"></i>Pro Tips for Best Results</h4>
                    <i class="fas fa-chevron-down tips-chevron"></i>
                </div>
                <div class="tips-content" id="tipsContent">
                    <div class="tip-item"><i class="fas fa-check-circle tip-check"></i><p>Use high-quality images (minimum 1000px on the shortest side)</p></div>
                    <div class="tip-item"><i class="fas fa-check-circle tip-check"></i><p>Name files in order (e.g., page01.jpg, page02.jpg) for automatic sequencing</p></div>
                    <div class="tip-item"><i class="fas fa-check-circle tip-check"></i><p>Supported formats: JPG, PNG, WEBP (Max 50MB per file)</p></div>
                    <div class="tip-item"><i class="fas fa-check-circle tip-check"></i><p>Upload pages in reading order (left to right, top to bottom)</p></div>
                </div>
            </div>

            <div class="actions">
                <a href="dashboard.html" class="btn-back"><i class="fas fa-arrow-left"></i>Back to Dashboard</a>
                <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                    <span class="file-status" id="status2">0 files selected</span>
                    <button class="btn-submit" id="submitBtn" disabled><span>Continue to Review</span><i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>&copy; 2024 MangaMotion. Transform your manga into cinematic animations.</p>
    </footer>

    <script>
        const zone = document.getElementById('zone');
        const fileInput = document.getElementById('fileInput');
        const selectBtn = document.getElementById('selectBtn');
        const demoBtn = document.getElementById('demoBtn');
        const preview = document.getElementById('preview');
        const list = document.getElementById('list');
        const count = document.getElementById('count');
        const size = document.getElementById('size');
        const clearBtn = document.getElementById('clearBtn');
        const progress = document.getElementById('progress');
        const fill = document.getElementById('fill');
        const percent = document.getElementById('percent');
        const status = document.getElementById('status');
        const submitBtn = document.getElementById('submitBtn');
        const status2 = document.getElementById('status2');
        const tipsBtn = document.getElementById('tipsBtn');
        const tipsContent = document.getElementById('tipsContent');

        let files = [];

        selectBtn.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', (e) => { files = Array.from(e.target.files); show(); });

        zone.addEventListener('dragover', (e) => { e.preventDefault(); zone.classList.add('drag'); });
        zone.addEventListener('dragleave', () => zone.classList.remove('drag'));
        zone.addEventListener('drop', (e) => { e.preventDefault(); zone.classList.remove('drag'); files = Array.from(e.dataTransfer.files); fileInput.files = e.dataTransfer.files; show(); });

        function show() {
            list.innerHTML = '';
            let total = 0;
            files.forEach((f, i) => {
                const mb = (f.size / 1024 / 1024).toFixed(2);
                total += parseFloat(mb);
                const div = document.createElement('div');
                div.className = 'file-item';
                div.innerHTML = `<div class="file-info"><div class="file-icon"><i class="fas fa-file-image"></i></div><div class="file-details"><h5>${f.name}</h5><p>${mb} MB</p></div></div><button class="btn-remove" data-i="${i}"><i class="fas fa-times"></i></button>`;
                list.appendChild(div);
            });
            count.textContent = files.length;
            size.textContent = total.toFixed(2);
            status2.textContent = `${files.length} ${files.length === 1 ? 'file' : 'files'} selected`;
            preview.classList.toggle('show', files.length > 0);
            submitBtn.disabled = files.length === 0;
            document.querySelectorAll('.btn-remove').forEach(b => b.addEventListener('click', () => { files.splice(parseInt(b.dataset.i), 1); show(); }));
        }

        clearBtn.addEventListener('click', () => { files = []; fileInput.value = ''; show(); });

        demoBtn.addEventListener('click', () => {
            demoBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>Loading...';
            demoBtn.disabled = true;
            setTimeout(() => {
                files = [
                    { name: 'demo-page-01.jpg', size: 1024*1024*1.5 },
                    { name: 'demo-page-02.jpg', size: 1024*1024*1.2 },
                    { name: 'demo-page-03.jpg', size: 1024*1024*1.7 }
                ];
                show();
                demoBtn.innerHTML = '<i class="fas fa-check-circle"></i>Demo Loaded';
                setTimeout(() => { demoBtn.innerHTML = '<i class="fas fa-magic"></i>Try Demo'; demoBtn.disabled = false; }, 2000);
            }, 1500);
        });

        submitBtn.addEventListener('click', async () => {
            if (files.length === 0) return;
            progress.classList.add('show');
            submitBtn.disabled = true;
            let p = 0;
            const interval = setInterval(() => {
                p += Math.random() * 20;
                if (p > 100) p = 100;
                fill.style.width = p + '%';
                percent.textContent = Math.round(p) + '%';
                if (p >= 100) {
                    clearInterval(interval);
                    status.textContent = 'Processing files...';
                    setTimeout(() => {
                        localStorage.setItem('project_current', JSON.stringify({
                            id: 'project_' + Date.now(),
                            files: files.map(f => ({ name: f.name, size: f.size, type: f.type })),
                            createdAt: new Date().toISOString()
                        }));
                        window.location.href = 'detection.html';
                    }, 1000);
                }
            }, 100);
        });

        tipsBtn.addEventListener('click', () => {
            tipsBtn.classList.toggle('open');
            tipsContent.classList.toggle('show');
        });
    </script>
</body>
</html>
