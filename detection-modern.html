<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Detection - MangaMotion AI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0F0F23 0%, #1A1A2E 50%, #0F0F23 100%);
            color: #e5e7eb;
            min-height: 100vh;
        }
        .nav { background: rgba(15, 15, 35, 0.95); backdrop-filter: blur(10px); padding: 1rem 2rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; }
        .logo { display: flex; align-items: center; gap: 0.75rem; color: white; text-decoration: none; font-weight: 700; font-size: 1.25rem; }
        .logo-icon { width: 40px; height: 40px; background: linear-gradient(135deg, #a855f7, #3b82f6); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; }
        .container { max-width: 1400px; margin: 0 auto; padding: 3rem 2rem; }
        .hero { text-align: center; margin-bottom: 3rem; }
        .hero h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; background: linear-gradient(135deg, #a855f7, #3b82f6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .hero p { color: #9ca3af; font-size: 1.1rem; }
        .progress-steps { display: flex; justify-content: center; gap: 2rem; margin-bottom: 3rem; flex-wrap: wrap; }
        .step { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; }
        .step-num { width: 40px; height: 40px; background: rgba(168, 85, 247, 0.2); border: 2px solid rgba(168, 85, 247, 0.5); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #a855f7; }
        .step.active .step-num { background: linear-gradient(135deg, #a855f7, #3b82f6); border-color: #a855f7; color: white; }
        .step-label { font-size: 0.9rem; color: #9ca3af; }
        .step.active .step-label { color: #a855f7; font-weight: 600; }
        .content-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; margin-bottom: 2rem; }
        .panel-box { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 16px; padding: 2rem; }
        .panel-box h3 { color: white; font-size: 1.3rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem; }
        .panel-box h3 i { color: #a855f7; }
        .manga-preview { background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(59, 130, 246, 0.1)); border: 2px solid rgba(168, 85, 247, 0.2); border-radius: 12px; aspect-ratio: 16/9; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; margin-bottom: 1.5rem; }
        .manga-preview-placeholder { text-align: center; color: rgba(255, 255, 255, 0.3); }
        .manga-preview-placeholder i { font-size: 4rem; margin-bottom: 1rem; }
        .detected-panel { position: absolute; border: 2px solid #10b981; background: rgba(16, 185, 129, 0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 700; color: #10b981; font-size: 1.5rem; transition: all 0.3s; }
        .detected-panel:hover { background: rgba(16, 185, 129, 0.2); border-color: #a855f7; }
        .panel-controls { display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 8px; font-weight: 500; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 0.5rem; }
        .btn-primary { background: linear-gradient(135deg, #a855f7, #3b82f6); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(168, 85, 247, 0.3); }
        .btn-secondary { background: rgba(255, 255, 255, 0.05); color: #9ca3af; border: 1px solid rgba(255, 255, 255, 0.1); }
        .btn-secondary:hover { background: rgba(255, 255, 255, 0.1); color: white; }
        .panel-stats { display: flex; justify-content: space-between; padding: 1rem; background: rgba(255, 255, 255, 0.02); border-radius: 8px; margin-bottom: 1.5rem; }
        .stat { display: flex; flex-direction: column; gap: 0.25rem; }
        .stat-label { font-size: 0.85rem; color: #6b7280; }
        .stat-value { font-size: 1.5rem; font-weight: 700; color: #a855f7; }
        .panel-list { display: flex; flex-direction: column; gap: 0.75rem; max-height: 500px; overflow-y: auto; }
        .panel-item { display: flex; align-items: center; gap: 1rem; padding: 1rem; background: rgba(51, 65, 85, 0.5); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 8px; cursor: grab; transition: all 0.3s; }
        .panel-item:hover { background: rgba(51, 65, 85, 0.7); border-color: rgba(168, 85, 247, 0.3); }
        .panel-item.dragging { opacity: 0.5; }
        .panel-num { width: 36px; height: 36px; background: linear-gradient(135deg, #a855f7, #3b82f6); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; flex-shrink: 0; }
        .panel-thumb { width: 50px; height: 40px; background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(59, 130, 246, 0.2)); border-radius: 6px; display: flex; align-items: center; justify-content: center; color: #a855f7; flex-shrink: 0; }
        .panel-info { flex: 1; }
        .panel-info p { color: white; font-weight: 500; margin-bottom: 0.25rem; }
        .panel-info span { color: #6b7280; font-size: 0.85rem; }
        .panel-drag { color: #6b7280; cursor: grab; }
        .panel-drag:active { cursor: grabbing; }
        .action-bar { display: flex; justify-content: space-between; align-items: center; padding-top: 1.5rem; border-top: 1px solid rgba(255, 255, 255, 0.1); margin-top: 1.5rem; flex-wrap: wrap; gap: 1rem; }
        .btn-continue { background: linear-gradient(135deg, #a855f7, #3b82f6); color: white; padding: 0.75rem 2rem; border: none; border-radius: 8px; font-weight: 500; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 0.5rem; }
        .btn-continue:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(168, 85, 247, 0.3); }
        .btn-continue:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-back { background: none; border: none; color: #9ca3af; cursor: pointer; text-decoration: none; display: flex; align-items: center; gap: 0.5rem; transition: color 0.3s; }
        .btn-back:hover { color: white; }
        .footer { background: rgba(15, 15, 35, 0.95); border-top: 1px solid rgba(255, 255, 255, 0.1); padding: 2rem; text-align: center; color: #9ca3af; margin-top: 4rem; }
        .footer-text { margin-bottom: 1rem; }
        .footer-links { display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap; margin-bottom: 1rem; }
        .footer-link { color: #9ca3af; text-decoration: none; transition: color 0.3s; }
        .footer-link:hover { color: white; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.05); }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2); border-radius: 4px; }
        @media (max-width: 1024px) {
            .content-grid { grid-template-columns: 1fr; }
            .hero h1 { font-size: 1.8rem; }
            .container { padding: 2rem 1rem; }
        }
        @media (max-width: 768px) {
            .progress-steps { gap: 1rem; }
            .step-label { font-size: 0.8rem; }
            .panel-box { padding: 1.5rem; }
            .action-bar { flex-direction: column-reverse; }
            .btn-back, .btn-continue { width: 100%; justify-content: center; }
        }
    </style>
</head>
<body>
    <nav class="nav">
        <a href="index.html" class="logo">
            <div class="logo-icon"><i class="fas fa-play"></i></div>
            <span>MangaMotion</span>
        </a>
    </nav>

    <div class="container">
        <div class="hero">
            <h1>Panel Detection</h1>
            <p>AI-powered panel detection with drag-and-drop reordering</p>
        </div>

        <div class="progress-steps">
            <div class="step">
                <div class="step-num">1</div>
                <div class="step-label">Upload</div>
            </div>
            <div class="step active">
                <div class="step-num">2</div>
                <div class="step-label">Detect</div>
            </div>
            <div class="step">
                <div class="step-num">3</div>
                <div class="step-label">Edit</div>
            </div>
            <div class="step">
                <div class="step-num">4</div>
                <div class="step-label">Export</div>
            </div>
        </div>

        <div class="content-grid">
            <div class="panel-box">
                <h3><i class="fas fa-image"></i>Manga Page Preview</h3>
                <div class="manga-preview" id="mangaPreview">
                    <div class="manga-preview-placeholder">
                        <i class="fas fa-book"></i>
                        <p>Manga Page Sample</p>
                    </div>
                    <div class="detected-panel" style="top: 10%; left: 5%; width: 40%; height: 35%;">1</div>
                    <div class="detected-panel" style="top: 10%; right: 5%; width: 40%; height: 35%;">2</div>
                    <div class="detected-panel" style="bottom: 10%; left: 5%; width: 90%; height: 40%;">3</div>
                </div>
                <p style="color: #6b7280; font-size: 0.9rem; text-align: center; margin-bottom: 1.5rem;">3 panels detected automatically</p>
                <div class="panel-controls">
                    <button class="btn btn-primary" id="editBtn">
                        <i class="fas fa-edit"></i>Edit Panels
                    </button>
                    <button class="btn btn-secondary" id="regenerateBtn">
                        <i class="fas fa-redo"></i>Regenerate
                    </button>
                </div>
            </div>

            <div class="panel-box">
                <h3><i class="fas fa-list"></i>Panel Order</h3>
                <div class="panel-stats">
                    <div class="stat">
                        <div class="stat-label">Total Panels</div>
                        <div class="stat-value" id="panelCount">3</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Detected</div>
                        <div class="stat-value" style="color: #10b981;">âœ“</div>
                    </div>
                </div>
                <p style="color: #9ca3af; font-size: 0.9rem; margin-bottom: 1rem;">Drag to reorder panels</p>
                <div class="panel-list" id="panelList">
                    <div class="panel-item" data-panel="1">
                        <div class="panel-num">1</div>
                        <div class="panel-thumb"><i class="fas fa-image"></i></div>
                        <div class="panel-info">
                            <p>Panel 1</p>
                            <span>Top Left</span>
                        </div>
                        <i class="fas fa-grip-vertical panel-drag"></i>
                    </div>
                    <div class="panel-item" data-panel="2">
                        <div class="panel-num">2</div>
                        <div class="panel-thumb"><i class="fas fa-image"></i></div>
                        <div class="panel-info">
                            <p>Panel 2</p>
                            <span>Top Right</span>
                        </div>
                        <i class="fas fa-grip-vertical panel-drag"></i>
                    </div>
                    <div class="panel-item" data-panel="3">
                        <div class="panel-num">3</div>
                        <div class="panel-thumb"><i class="fas fa-image"></i></div>
                        <div class="panel-info">
                            <p>Panel 3</p>
                            <span>Bottom Full</span>
                        </div>
                        <i class="fas fa-grip-vertical panel-drag"></i>
                    </div>
                </div>
                <div class="action-bar">
                    <a href="upload.html" class="btn-back"><i class="fas fa-arrow-left"></i>Back</a>
                    <button class="btn-continue" id="continueBtn">
                        <span>Continue to Editor</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p class="footer-text">&copy; 2024 MangaMotion. Transform your manga into cinematic animations.</p>
        <div class="footer-links">
            <a href="#" class="footer-link">Privacy Policy</a>
            <a href="#" class="footer-link">Terms of Service</a>
            <a href="#" class="footer-link">Contact</a>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <script>
        const panelList = document.getElementById('panelList');
        const editBtn = document.getElementById('editBtn');
        const regenerateBtn = document.getElementById('regenerateBtn');
        const continueBtn = document.getElementById('continueBtn');
        const panelCount = document.getElementById('panelCount');

        // Initialize Sortable
        new Sortable(panelList, {
            animation: 150,
            ghostClass: 'dragging',
            handle: '.panel-drag',
            onEnd: updatePanelNumbers
        });

        function updatePanelNumbers() {
            const panels = document.querySelectorAll('#panelList .panel-item');
            panels.forEach((panel, index) => {
                const num = panel.querySelector('.panel-num');
                num.textContent = index + 1;
                panel.dataset.panel = index + 1;
            });
        }

        editBtn.addEventListener('click', () => {
            editBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>Editing...';
            editBtn.disabled = true;
            setTimeout(() => {
                editBtn.innerHTML = '<i class="fas fa-edit"></i>Edit Panels';
                editBtn.disabled = false;
                alert('Panel editing mode activated!');
            }, 1500);
        });

        regenerateBtn.addEventListener('click', () => {
            regenerateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>Regenerating...';
            regenerateBtn.disabled = true;
            const panels = document.querySelectorAll('.detected-panel');
            panels.forEach((panel, index) => {
                setTimeout(() => {
                    panel.style.transform = 'scale(1.1)';
                    setTimeout(() => panel.style.transform = 'scale(1)', 300);
                }, index * 200);
            });
            setTimeout(() => {
                regenerateBtn.innerHTML = '<i class="fas fa-redo"></i>Regenerate';
                regenerateBtn.disabled = false;
                alert('Panels regenerated!');
            }, 2000);
        });

        continueBtn.addEventListener('click', () => {
            continueBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>Loading...';
            continueBtn.disabled = true;
            setTimeout(() => {
                window.location.href = 'editor.html';
            }, 1500);
        });
    </script>
</body>
</html>
